<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Russell TV</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="icon" type="image/png" href="/favicon.png">
  
  <!-- Styles -->
  <link rel="stylesheet" href="/css/grid-pro.css">
  <link rel="stylesheet" href="/css/russelltv-styles.css">
</head>

<body>
  <header class="rtv-header">
    <div class="rtv-brand">
      <button
        type="button"
        id="rtv-brand-button"
        class="rtv-brand-button"
        aria-label="Contact RussellTV"
      >
        <span class="rtv-brand-title">Russell TV</span>
        <span class="rtv-brand-tagline">Transmit Feedback</span>
      </button>
    </div>

    <!-- Mobile channel dropdown -->
    <div class="channel-select-mobile-wrapper">
      <select id="channel-select-mobile" class="channel-select-mobile">
        <option value="">Select channel</option>
      </select>
    </div>

    <!-- Desktop channel buttons -->
    <div id="dynamic-buttons" class="mode-toggle"></div>

    <!-- Mode toggle -->
    <div class="mode-toggle">
      <button id="btn-single" class="btn active">Single</button>
      <button id="btn-grid" class="btn">Grid (4)</button>
      <a id="btn-comm-planner" class="btn" href="/comm.html" title="Comm Planner">Comm</a>
    </div>
  </header>

  <main>
    <!-- SINGLE VIEW -->
    <section id="single-view">
      <div class="single-layout">
        <div class="single-video-card">
          <video id="single-player-hls" controls autoplay muted playsinline></video>
        </div>

        <aside class="single-side-panel" id="single-side-panel">
          <section class="headline-section">
            <h3 id="channel-headlines-title">Channel Headlines</h3>
            <div class="headline-meta" id="channel-headlines-updated"></div>
            <ul class="headline-list" id="channel-headlines-list">
              <li class="headline-empty">Select a channel to load headlines…</li>
            </ul>
          </section>

          <section class="headline-section">
            <h3>Marine Corps News</h3>
            <div class="headline-meta" id="marines-headlines-updated"></div>
            <ul class="headline-list" id="marines-headlines-list">
              <li class="headline-empty">Loading Marine Corps news…</li>
            </ul>
          </section>
        </aside>
      </div>
    </section>

    <!-- GRID VIEW -->
    <section id="grid-view">
      <div class="grid-wrapper">
        <!-- Cells built dynamically -->
      </div>
    </section>
    <!-- COMM PLANNER VIEW -->
    <section id="comm-planner-view" style="display:none;">
      <div class="comm-header">
        <h2>Comm Planner Dashboard</h2>
        <p class="comm-subtitle">
          Set your location once, then read SATCOM, HF, cellular and space-weather at a glance.
        </p>
      </div>

      <div class="comm-layout">
        <!-- Left: location selector -->
        <div class="comm-location-panel">
          <div class="comm-location-card">
            <div class="comm-location-header">
              <span>Location</span>
              <small id="comm-location-summary"></small>
            </div>

            <div class="comm-location-tabs">
              <button type="button" class="location-mode-tab active" data-mode="search">Search</button>
              <button type="button" class="location-mode-tab" data-mode="mgrs">MGRS</button>
              <button type="button" class="location-mode-tab" data-mode="latlon">Lat/Lon</button>
              <button type="button" class="location-mode-tab" data-mode="maiden">Grid</button>
            </div>

            <div id="comm-location-input-area"></div>

            <div class="comm-location-footer">
              <button type="button" id="comm-use-browser" class="location-util-btn">
                Use browser location
              </button>
            </div>
          </div>
        </div>

        <!-- Right: cards (stub for now) -->
        <div class="comm-main-panel">
          <div class="comm-cards">
            <article class="comm-card">
              <div class="comm-card-header">
                <div class="comm-card-title"><span>Comms Snapshot</span></div>
                <div class="comm-card-status"><span>n/a</span></div>
              </div>
              <div class="comm-card-body">
                <p class="comm-placeholder">
                  Select a location to see SATCOM, HF, cellular, and space-weather summaries.
                </p>
              </div>
            </article>
          </div>
        </div>
      </div>
    </section>

  </main>

  <!-- Mobile info-bar ticker -->
  <div id="info-bar-mobile">
    <div id="info-bar-mobile-inner"></div>
  </div>

  <!-- External Dependencies -->
  <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>

  <!-- Configuration -->
  <script src="/js/russelltv-core.js"></script>
  <script src="/config/channels.js"></script>
  <script src="/config/time-config.js"></script>
  <script src="/config/weather-config.js"></script>
  <script src="/config/news-config.js"></script>
  <script src="/config/space-weather-config.js"></script>
  <!-- Core Modules -->
  <script src="/js/player-single.js"></script>
  <script src="/js/player-grid.js"></script>
  <script src="/js/ui-controls.js"></script>
  <script src="/js/view-manager.js"></script>
  <script src="/js/mobile-ui.js"></script>
  <!-- Features -->
  <script src="js/comm-planner.js"></script>
  <script src="js/comm-sat.js"></script>
  <script src="/js/news.js"></script>
  <script src="/js/single-view-controls.js"></script>
  <script src="/js/keyboard-av-controls.js"></script>
  <script src="/js/grid-state.js"></script>
  <script src="/js/keyboard-controls.js"></script>
  <script src="/js/grid-pro.js"></script>
  <!-- Info Bar & Space Weather (unified) -->
  <script src="/js/info-bar.js"></script>
  <script src="/js/space-weather.js"></script>
  <script src="/js/cellular-coverage.js"></script>
  <script src="/js/satellite-lookangles.js"></script>
  <script src="/js/propagation-panel.js"></script>
  <script src="/js/feature-toggles.js"></script>
  <!-- GunnyGPT Chat -->
  <script src="/js/gunny-chat.js"></script>

  <!-- Application Bootstrap -->
  <script src="/js/app.js"></script>

  <!-- Brand click -> mailto: contact -->
  <script>
    (function () {
      const brandButton = document.getElementById('rtv-brand-button');
      if (!brandButton) return;

      brandButton.addEventListener('click', () => {
        const email = 'mike@russellmarine.tech';
        const subject = 'Russell TV';
        const mailtoUrl = `mailto:${email}?subject=${encodeURIComponent(subject)}`;
        window.location.href = mailtoUrl;
      });
    })();
  </script>
</body>
</html>
