<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Comm Planner</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="icon" type="image/png" href="/favicon.png">

  <!-- External Dependencies -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" 
        integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" 
        crossorigin="">

  <!-- Comm Dashboard Styles -->
  <link rel="stylesheet" href="css/comm.css">
  <link rel="stylesheet" href="/comm/css/cards/location.css">
  <link rel="stylesheet" href="/comm/css/cards/spacewx.css">
  <link rel="stylesheet" href="/comm/css/cards/weather.css">
  <link rel="stylesheet" href="/comm/css/cards/gnss.css">
</head>

<body class="comm-page">
  <header class="rtv-header">
    <div class="rtv-brand">
      <button type="button" id="rtv-brand-button" class="rtv-brand-button" aria-label="Contact">
        <span class="rtv-brand-title">Russell TV</span>
        <span class="rtv-brand-tagline">Transmit Feedback</span>
      </button>
    </div>

    <div class="mode-toggle">
      <div class="mode-toggle-row">
        <!-- Back to main site -->
        <a href="/" class="mode-link-btn" title="Back to TV">Back to TV</a>

        <!-- Menu dropdown -->
        <div class="mode-row-actions">
          <details class="panel-toggle-dropdown" id="comm-panel-toggle-dropdown">
            <summary class="btn panel-toggle-summary">Menu â–¾</summary>
            <div class="panel-toggle-menu" id="comm-panel-toggle-bar" aria-label="Toggle dashboard panels">
              
              <!-- Dashboard actions -->
              <button type="button" class="panel-menu-item" id="comm-export-pptx">
                Export Dashboard
              </button>

              <hr class="panel-menu-divider" />

              <!-- Panel toggles -->
              <button type="button" class="panel-toggle active" id="comm-map-toggle" data-target="comm-card-overlay">
                Overlays Map
              </button>
              <button type="button" class="panel-toggle active" data-target="comm-card-location">
                Location
              </button>
              <button type="button" class="panel-toggle active" data-target="comm-card-spacewx">
                Space Weather
              </button>
              <button type="button" class="panel-toggle active" data-target="comm-card-weather">
                Local Weather
              </button>
              <button type="button" class="panel-toggle active" data-target="comm-card-gnss">
                GPS &amp; PNT
              </button>
              <button type="button" class="panel-toggle active" data-target="comm-card-hf">
                HF Propagation
              </button>
              <button type="button" class="panel-toggle active" data-target="comm-card-satcom">
                SATCOM Weather
              </button>
              <button type="button" class="panel-toggle active" data-target="comm-card-satangles">
                SATCOM Planner
              </button>
              <button type="button" class="panel-toggle active" data-target="comm-card-cellular">
                Cellular Coverage
              </button>

              <button type="button" class="panel-toggle-all" id="comm-panel-toggle-all">
                All On/Off
              </button>
            </div>
          </details>
        </div>
      </div>
    </div>
  </header>

  <main>
    <section id="comm-planner-view">
      <div class="comm-layout-grid">

        <!-- Location Card -->
        <article id="comm-card-location" class="comm-card">
          <div class="comm-card-header">
            <div class="comm-card-title"><span>Location</span></div>
          </div>
          <div class="comm-card-body" id="comm-location-body">
            <!-- Rendered by LocationCard.js -->
          </div>
        </article>

        <!-- Space Weather Card -->
        <article id="comm-card-spacewx" class="comm-card">
          <div class="comm-card-header">
            <div class="comm-card-title"><span>Space Weather</span></div>
            <div class="comm-card-meta" id="comm-spacewx-meta"></div>
          </div>
          <div class="comm-card-body" id="comm-spacewx-body">
            <p class="comm-placeholder">
              Global space-weather scales (R/S/G) and Kp index will appear here.
            </p>
          </div>
        </article>

        <!-- Overlay Map Card -->
        <article id="comm-card-overlay" class="comm-card comm-span-2">
          <div class="comm-card-header">
            <div class="comm-card-title"><span>Operational Overlays</span></div>
            <div class="comm-card-status"><span id="comm-overlay-status">off</span></div>
          </div>
          <div class="comm-card-body" id="comm-overlay-body">
            <p class="comm-placeholder">Toggle the overlays map to view weather, towers, and critical infrastructure.</p>
          </div>
        </article>

        <!-- Local Weather Card -->
        <article id="comm-card-weather" class="comm-card comm-span-2">
          <div class="comm-card-header">
            <div class="comm-card-title"><span>Local Weather</span></div>
            <div class="comm-card-meta" id="comm-weather-meta"></div>
          </div>
          <div class="comm-card-body" id="comm-weather-body"></div>
        </article>

        <!-- GPS & PNT Card -->
        <article id="comm-card-gnss" class="comm-card">
          <div class="comm-card-header">
            <div class="comm-card-title"><span>GPS &amp; PNT</span></div>
            <div class="comm-card-meta"><span id="comm-gps-status" class="status-pill">--</span></div>
          </div>
          <div class="comm-card-body" id="comm-gps-body">
            <p class="comm-placeholder">
              GPS constellation status and interference assessment.
            </p>
          </div>
        </article>

        <!-- HF Propagation Card -->
        <article id="comm-card-hf" class="comm-card">
          <div class="comm-card-header">
            <div class="comm-card-title"><span>HF Propagation</span></div>
            <div class="comm-card-meta"><span id="comm-hf-status" class="status-pill">--</span></div>
          </div>
          <div class="comm-card-body" id="comm-hf-body">
            <p class="comm-placeholder">
              HF band conditions and propagation forecast.
            </p>
          </div>
        </article>

        <!-- SATCOM Weather Card -->
        <article id="comm-card-satcom" class="comm-card">
          <div class="comm-card-header">
            <div class="comm-card-title"><span>SATCOM Weather</span></div>
            <div class="comm-card-meta"><span id="comm-sat-status" class="status-pill">--</span></div>
          </div>
          <div class="comm-card-body" id="comm-satcom-body">
            <p class="comm-placeholder">
              Satellite communication band status and risk assessment.
            </p>
          </div>
        </article>

        <!-- SATCOM Planner Card -->
        <article id="comm-card-satangles" class="comm-card">
          <div class="comm-card-header">
            <div class="comm-card-title"><span>SATCOM Planner</span></div>
            <div class="comm-card-meta" id="comm-satangles-meta"></div>
          </div>
          <div class="comm-card-body" id="comm-satangles-body">
            <p class="comm-placeholder">
              Satellite look angles and link budget calculator.
            </p>
          </div>
        </article>

        <!-- Cellular Coverage Card -->
        <article id="comm-card-cellular" class="comm-card">
          <div class="comm-card-header">
            <div class="comm-card-title"><span>Cellular Coverage</span></div>
            <div class="comm-card-meta" id="comm-cellular-meta"></div>
          </div>
          <div class="comm-card-body" id="comm-cellular-body">
            <p class="comm-placeholder">
              Cellular tower density and coverage assessment for selected location.
            </p>
          </div>
        </article>

      </div>
    </section>
  </main>

  <!-- External Libraries -->
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" 
          integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" 
          crossorigin=""></script>
  
  <!-- Export Libraries (optional, loaded on demand) -->
  <script src="https://cdn.jsdelivr.net/npm/pptxgenjs@3.12.0/dist/pptxgen.bundle.js" defer></script>
  <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js" defer></script>

  <!-- Comm Dashboard Core -->
  <script src="js/comm-core.js"></script>
  
  <!-- Card Modules -->
  <script src="js/cards/BaseCard.js"></script>
  <script src="js/cards/LocationCard.js"></script>
  <!-- Future cards loaded here -->
  <script src="js/cards/SpaceWeatherCard.js"></script>
  <script src="js/cards/WeatherCard.js"></script>
  <script src="js/cards/GnssCard.js"></script>
  <!-- <script src="js/cards/HfPropagationCard.js"></script> -->
  <!-- <script src="js/cards/SatcomWeatherCard.js"></script> -->
  <!-- <script src="js/cards/SatcomPlannerCard.js"></script> -->
  <!-- <script src="js/cards/CellularCard.js"></script> -->

  <!-- Map Overlay Module -->
  <script src="js/comm-map.js" defer></script>

  <!-- Main Orchestrator (must be last) -->
  <script src="js/comm-planner.js"></script>
</body>
</html>
